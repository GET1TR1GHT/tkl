function huadong(e){var t,a,n=e;n.on("touchstart",function(e){t=0,t=e.originalEvent.touches[0].clientX}),n.on("touchmove",function(e){a=0,a=e.originalEvent.touches[0].clientX}),n.on("touchend",function(e){var n=0;if(null!=a&&(n=Math.abs(t-a)),clearInterval(play),n>30){return 2==$(".current").attr("data-id")?$(this).carousel(show(t>a?2:0)):1==$(".current").attr("data-id")?$(this).carousel(show(t>a?1:2)):$(this).carousel(show(t>a?0:1)),t=null,a=null,n=null}else clearInterval(play)})}function huadongnew(e){var t,a,n=e;n.on("touchstart",function(e){t=e.originalEvent.touches[0].clientX}),n.on("touchmove",function(e){a=e.originalEvent.touches[0].clientX}),n.on("touchend",function(e){function n(){++i==r&&(clearInterval(time),clearInterval(timer),autoplaynew())}if(Math.abs(t-a)>50){$(".storedetail").offset().left-15==-$(".shownews").width()?$(this).carousel(t>a?shownew(2,!0):shownew(0,!1)):$(".storedetail").offset().left-15==-2*$(".shownews").width()?$(this).carousel(t>a?clearInterval(time):shownew(1,!1)):$(this).carousel(t>a?shownew(1,!0):clearInterval(time)),t=null;var i=0,r=7;window.setInterval(n,1e3)}})}function autoplay(){play=setInterval(function(){index==$("#bannerimg>li").length-1?index=0:index++,show(index)},5e3)}function show(e){index=e;var t=$("#bannerimg>li"),a=$("#numchar>p");t.each(function(e,a){t.eq(e).removeClass(),t.eq(index).addClass("current")}),a.each(function(e,t){a.eq(e).removeClass(),a.eq(index).addClass("default")})}function autoplaynew(){var e=!0;time=setInterval(function(){2==number?(e=!1,e?number++:number--):1==number&&0==e?(e=!1,e?number++:number--):(e=!0,e?number++:number--),clearInterval(timer),shownew(number,e)},1e4)}function shownew(e,t){number=e,$.ajax({method:"get",url:"http://idp.dev2.wizarcan.com/client/getNewStore.shtml?buildingId=33",buildingId:"true",dataType:"json",success:function(t){var a=$(".newstorename"),n=$(".newstoreads"),i=[];$("#storesdetails>li").each(function(r,o){strs=t.data[number].storeImage.split(","),i.push(strs[0]),$("#storesdetails>li").eq(e).css({background:"url(http://idp.dev2.wizarcan.com/"+i[0]+") no-repeat","background-size":"100% 100%"}).attr("onclick",'javascrtpt:window.location.href="'+t.data[number].url+'"'),a.html(t.data[number].brand.replace("#","  ")),n.html(t.data[number].address)})},error:function(){alert("失败")}});var a=t,n=$("#roll>p");n.each(function(e,t){n.eq(e).removeClass(),n.eq(number).addClass("default")});var i=($(".shownews").width(),$(".shownews").width()/500);i=i>0?Math.ceil(i):Math.floor(i),isNaN(i)||(1==a?timer=setInterval(function(){if($("#storesdetails").offset().left<=-($(".shownews").width()*number-15))clearInterval(timer);else{var e=$("#storesdetails").offset().left-15-i+"px";$("#storesdetails").css("left",e)}},1):timer1=setInterval(function(){if($("#storesdetails").offset().left==-($(".shownews").width()*number-15))clearInterval(timer1);else{var e=$("#storesdetails").offset().left-15+i+"px";$("#storesdetails").css("left",e)}},1))}var play=null,time=null,index=0,timer=null,timer1=null,number=0;$(document).ready(function(){autoplay(),autoplaynew(),huadong($(".banner")),huadongnew($(".storedetail"))}),$(document).ready(function(){$.ajax({method:"get",url:"http://idp.dev2.wizarcan.com/client/getNewStore.shtml?buildingId=33",buildingId:"true",dataType:"json",success:function(e){var t=$(".newstorename"),a=$(".newstoreads"),n=[];$("#storesdetails>li").each(function(i,r){strs=e.data[0].storeImage.split(","),n.push(strs[0]),$("#storesdetails>li").attr("data-id")==i+1&&($("#storesdetails>li").eq(i).css({background:"url(http://idp.dev2.wizarcan.com/"+n[0]+") no-repeat","background-size":"100% 100%"}).attr("onclick",'javascrtpt:window.location.href="'+e.data[0].url+'"'),t.html(e.data[0].brand.replace("#","  ")),a.html(e.data[0].address))})},error:function(){alert("失败")}}),$.ajax({method:"get",url:"http://idp.dev2.wizarcan.com/client/getHotStore.shtml?buildingId=33",buildingId:"true",dataType:"json",success:function(e){var t=$(".storelogo>img"),a=$(".hotstorename"),n=$(".hotstorespecil");$("#hotstoreul>li").each(function(i,r){t.eq(i).attr("src","http://idp.dev2.wizarcan.com"+e.data[i].icon),a.eq(i).html(e.data[i].brand.replace("#","  ")),n.eq(i).html(e.data[i].hotReasons)})},error:function(e){alert(e.msg)}}),$.ajax({method:"get",url:"http://idp.dev2.wizarcan.com/client/getBannerHome.shtml?buildingId=33",buildingId:"true",dataType:"json",success:function(e){$("#bannerimg>li").each(function(t,a){var n=e.data[t].icon;$("#bannerimg>li").eq(t).css({background:"url(http://idp.dev2.wizarcan.com/"+n+") no-repeat","background-size":"100% 100%"}).attr("onclick",'javascrtpt:window.location.href="'+e.data[t].url+'"')})},error:function(){alert("失败")}}),$.ajax({method:"get",url:"http://idp.dev2.wizarcan.com/client/getPoiByWhere.shtml?buildingId=33",buildingId:"true",dataType:"json",success:function(e){$.each(e.data,function(t,a){if("西餐"==e.data[t].detail)for(var n=0;n<1;n++)$(".datailsul").append('<li class="container">                    <div class="detailleft">                        <h1>'+e.data[t].brand.replace("#","  ")+"</h1>                        <h2>"+(""==e.data[t].discountInfo?"暂无折扣优惠":e.data[t].discountInfo)+'</h2>                        <div class="detailleftbottom">                            <p>'+e.data[t].detail+("0"==e.data[t].serviceLabels[3]?"":"预付卡店铺")+'</p>                            <div class="yellowloacl">                                <img src="images/icon/loaclyellow.png"/>                                <h3>'+("M"==e.data[t].mapArea[0]?"M":"L"+e.data[t].mapArea[1])+'层</h3>                            </div>                            <div class="good">                                <img src="images/icon/good.png"/>                                <h3>123</h3>                            </div>                        </div>                    </div>                    <div class="detailright">                        <img src="'+(void 0===e.data[t].icon?"images/icon/Rectangle.png":"http://idp.dev2.wizarcan.com/"+e.data[t].icon)+'"/>                    </div>'+("0"==e.data[t].serviceLabels[2]?"":'<div class="vipsign" >\n                        <img src="images/icon/vipicon.png"/>\n                    </div>')+"                </li>")})},error:function(){alert("失败")}})});